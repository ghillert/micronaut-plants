(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{Mhbo:function(t,e,n){"use strict";n.r(e),n.d(e,"PlantsModule",(function(){return A}));var i=n("tyNb"),s=n("LRne");class a{constructor(){this.totalPages=0,this.totalElements=0,this.pageNumber=0,this.pageSize=10,this.items=[],this.filter={},this.sort={}}static fromJSON(t){const e=new a;if(!t)throw console.error("input",t),new Error("Was expecting a page property.");return e.pageNumber=t.number,e.pageSize=t.size,e.totalElements=t.totalElements,e.totalPages=t.totalPages,e}getItemsAsObservable(){return Object(s.a)(this.items)}update(t){this.items.length=0,this.items.push(...t.items),this.pageNumber=t.pageNumber,this.pageSize=t.pageSize,this.totalElements=t.totalElements,this.totalPages=t.totalPages}}var r=n("XNiG"),c=n("itXk"),l=n("HDdC"),o=n("D0XW"),b=n("DH7j");function p(t){return!Object(b.a)(t)&&t-parseFloat(t)+1>=0}var g=n("z+Ro");function u(t){const{index:e,period:n,subscriber:i}=t;if(i.next(e),!i.closed){if(-1===n)return i.complete();t.index=e+1,this.schedule(t,n)}}var d=n("l7GE"),h=n("ZUHj");class m{constructor(t){this.notifier=t}call(t,e){const n=new f(t),i=Object(h.a)(n,this.notifier);return i&&!n.seenValue?(n.add(i),e.subscribe(n)):n}}class f extends d.a{constructor(t){super(t),this.seenValue=!1}notifyNext(t,e,n,i,s){this.seenValue=!0,this.complete()}notifyComplete(){}}var P=n("lJxs"),z=n("nYR2"),Q=n("fXoL"),v=n("tk/3"),w=n("2Vo4");class S{static fromJSON(t){return(new S).deserialize(t)}static pageFromJSON(t){const e=a.fromJSON(t);return t&&t.content&&(e.items=t.content.map(S.fromJSON)),e}deserialize(t){return this.id=t.id,this.genus=t.genus,this.species=t.species,this.commonName=t.commonName,this.distance=t.distance,this.plantSignMissing=t.plantSignMissing,this.plantsNearby=t.plantsNearby,this.imageIds=t.imageIds,this}}let O=(()=>{class t{constructor(t){this.httpClient=t,this.taxaUrl="/api/plants",this.taxaSubject$=new w.a(null)}getPlants(t,e){const n=(new v.c).append("page",t.toString()).append("size",e.toString());return this.httpClient.get(this.taxaUrl,{params:n}).pipe(Object(P.a)(S.pageFromJSON))}getPlant(t){const e=(new v.c).append("radius","20");return this.httpClient.get(this.taxaUrl+"/"+t,{params:e}).pipe(Object(P.a)(S.fromJSON))}}return t.\u0275fac=function(e){return new(e||t)(Q.Ub(v.a))},t.\u0275prov=Q.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var N=n("8MG2"),x=n("ofXK");function y(t,e){if(1&t){const t=Q.Rb();Q.Qb(0,"clr-dg-row"),Q.Qb(1,"clr-dg-cell",1),Q.Qb(2,"a",6),Q.Yb("click",(function(){Q.pc(t);const n=e.$implicit;return Q.ac().loadDetails(n.id)})),Q.Lb(3,"clr-icon",7),Q.Pb(),Q.Pb(),Q.Qb(4,"clr-dg-cell"),Q.zc(5),Q.Pb(),Q.Qb(6,"clr-dg-cell"),Q.zc(7),Q.Pb(),Q.Pb()}if(2&t){const t=e.$implicit;Q.Cb("missingPlantSign",t.plantSignMissing),Q.zb(5),Q.Ac(t.genus),Q.zb(2),Q.Ac(t.species)}}const D=function(){return[]},I=function(){return[10,20,50,100]};function j(t,e){1&t&&(Q.Qb(0,"div",10),Q.Qb(1,"div",11),Q.Qb(2,"div",12),Q.Qb(3,"div",13),Q.Lb(4,"clr-icon",14),Q.Pb(),Q.Qb(5,"span",15),Q.zc(6,"The plant sign is missing!"),Q.Pb(),Q.Pb(),Q.Pb(),Q.Pb())}function k(t,e){if(1&t&&(Q.Qb(0,"li"),Q.zc(1),Q.Pb()),2&t){const t=e.$implicit;Q.zb(1),Q.Dc("",t.genus," ",t.species," (",t.distance,"m)")}}function F(t,e){1&t&&Q.Lb(0,"img",16),2&t&&Q.hc("src","/api/images/",e.$implicit,"",Q.qc)}const C=function(){return[]},E=[{path:"",component:(()=>{class t{constructor(t,e){this.plantService=t,this.router=e,this.plants=new a,this.loading=!0,this.ngUnsubscribe$=new r.a}ngOnInit(){}ngOnDestroy(){this.ngUnsubscribe$.next(),this.ngUnsubscribe$.complete()}loadPlants(t,e){var n;t&&e&&Object(c.a)(function(t=0,e,n){let i=-1;return p(e)?i=Number(e)<1?1:Number(e):Object(g.a)(e)&&(n=e),Object(g.a)(n)||(n=o.a),new l.a(e=>{const s=p(t)?t:+t-n.now();return n.schedule(u,s,{index:0,period:i,subscriber:e})})}(500),this.plantService.getPlants(t,e)).pipe((n=this.ngUnsubscribe$,t=>t.lift(new m(n))),Object(P.a)(t=>t[1]),Object(z.a)(()=>this.loading=!1)).subscribe(t=>{this.plants=t,console.log(`Got ${this.plants.items.length}.`)},t=>{console.log(t)})}refresh(t){var e,n,i;null!=(null===(e=t.page)||void 0===e?void 0:e.current)&&null!=(null===(n=t.page)||void 0===n?void 0:n.size)&&this.loadPlants(t.page.current,null===(i=t.page)||void 0===i?void 0:i.size)}loadDetails(t){t&&(console.log("Go to Add Application page ..."),this.router.navigate(["/plants",t]))}}return t.\u0275fac=function(e){return new(e||t)(Q.Kb(O),Q.Kb(i.b))},t.\u0275cmp=Q.Eb({type:t,selectors:[["app-plants"]],decls:18,vars:11,consts:[[3,"clrDgLoading","clrDgRefresh"],[2,"width","50px"],[3,"missingPlantSign",4,"ngFor","ngForOf"],[3,"clrDgPage","clrDgPageSize","clrDgTotalItems"],["pagination",""],[3,"clrPageSizeOptions"],[3,"click"],["shape","details"]],template:function(t,e){if(1&t&&(Q.Qb(0,"h1"),Q.zc(1,"Plants"),Q.Pb(),Q.Qb(2,"p"),Q.zc(3," This page provides a list of plants.\n"),Q.Pb(),Q.Qb(4,"clr-datagrid",0),Q.Yb("clrDgRefresh",(function(t){return e.refresh(t)})),Q.Qb(5,"clr-dg-column",1),Q.zc(6,"Actions"),Q.Pb(),Q.Qb(7,"clr-dg-column"),Q.zc(8,"Genus"),Q.Pb(),Q.Qb(9,"clr-dg-column"),Q.zc(10,"Species"),Q.Pb(),Q.xc(11,y,8,4,"clr-dg-row",2),Q.Qb(12,"clr-dg-footer"),Q.Qb(13,"clr-dg-pagination",3,4),Q.Qb(15,"clr-dg-page-size",5),Q.zc(16,"Plants per page"),Q.Pb(),Q.zc(17),Q.Pb(),Q.Pb(),Q.Pb()),2&t){const t=Q.lc(14);Q.zb(4),Q.fc("clrDgLoading",e.loading),Q.zb(7),Q.fc("ngForOf",(null==e.plants?null:e.plants.items)||Q.ic(9,D)),Q.zb(2),Q.fc("clrDgPage",e.plants.pageNumber)("clrDgPageSize",e.plants.pageSize)("clrDgTotalItems",e.plants.totalElements),Q.zb(2),Q.fc("clrPageSizeOptions",Q.ic(10,I)),Q.zb(2),Q.Dc(" ",t.firstItem+1," - ",t.lastItem+1," of ",t.totalItems," plants ")}},directives:[N.c,N.r,N.v,N.w,N.x,N.e,N.s,x.l,N.f,N.h,N.g,N.i,N.t,N.d,N.u,N.k],styles:[".missingPlantSign[_ngcontent-%COMP%]{background-color:#efc006}"]}),t})()},{path:":id",component:(()=>{class t{constructor(t,e,n){this.plantService=t,this.router=e,this.route=n,this.plant=new S}ngOnInit(){this.route.params.subscribe(t=>{this.plant.id=t.id,this.plantService.getPlant(this.plant.id).subscribe(t=>{this.plant=t})})}goBack(){this.router.navigate(["/plants"])}}return t.\u0275fac=function(e){return new(e||t)(Q.Kb(O),Q.Kb(i.b),Q.Kb(i.a))},t.\u0275cmp=Q.Eb({type:t,selectors:[["app-plant-details"]],decls:36,vars:8,consts:[["class","alert alert-warning","role","alert",4,"ngIf"],[1,"table"],[1,"left"],[1,"clr-row","clr-align-items-start"],[1,"clr-col-6"],[1,"list"],[4,"ngFor","ngForOf"],[3,"src",4,"ngFor","ngForOf"],[1,"btn","btn-info-outline",3,"click"],["shape","caret left"],["role","alert",1,"alert","alert-warning"],[1,"alert-items"],[1,"alert-item","static"],[1,"alert-icon-wrapper"],["shape","exclamation-triangle",1,"alert-icon"],[1,"alert-text"],[3,"src"]],template:function(t,e){1&t&&(Q.Qb(0,"h1"),Q.zc(1),Q.Pb(),Q.xc(2,j,7,0,"div",0),Q.Qb(3,"table",1),Q.Qb(4,"tbody"),Q.Qb(5,"tr"),Q.Qb(6,"td"),Q.Qb(7,"strong"),Q.zc(8,"Id"),Q.Pb(),Q.Pb(),Q.Qb(9,"td",2),Q.zc(10),Q.Pb(),Q.Pb(),Q.Qb(11,"tr"),Q.Qb(12,"td"),Q.Qb(13,"strong"),Q.zc(14,"Genus"),Q.Pb(),Q.Pb(),Q.Qb(15,"td",2),Q.zc(16),Q.Pb(),Q.Pb(),Q.Qb(17,"tr"),Q.Qb(18,"td"),Q.Qb(19,"strong"),Q.zc(20,"Species"),Q.Pb(),Q.Pb(),Q.Qb(21,"td",2),Q.zc(22),Q.Pb(),Q.Pb(),Q.Pb(),Q.Pb(),Q.Qb(23,"div",3),Q.Qb(24,"div",4),Q.Qb(25,"h2"),Q.zc(26,"Plants nearby"),Q.Pb(),Q.Qb(27,"ul",5),Q.xc(28,k,2,3,"li",6),Q.Pb(),Q.Pb(),Q.Qb(29,"div",4),Q.Qb(30,"h2"),Q.zc(31,"Picture"),Q.Pb(),Q.xc(32,F,1,1,"img",7),Q.Pb(),Q.Pb(),Q.Qb(33,"button",8),Q.Yb("click",(function(){return e.goBack()})),Q.Lb(34,"clr-icon",9),Q.zc(35,"Back"),Q.Pb()),2&t&&(Q.zb(1),Q.Bc("Plant Details (Id: ",e.plant.id,")"),Q.zb(1),Q.fc("ngIf",e.plant.plantSignMissing),Q.zb(8),Q.Ac(e.plant.id),Q.zb(6),Q.Ac(e.plant.genus),Q.zb(6),Q.Ac(e.plant.species),Q.zb(6),Q.fc("ngForOf",e.plant.plantsNearby||Q.ic(7,C)),Q.zb(4),Q.fc("ngForOf",null==e.plant?null:e.plant.imageIds))},directives:[x.m,x.l,N.k,N.b],styles:["img[_ngcontent-%COMP%]{height:100%;width:100%;object-fit:contain}"]}),t})()}];let J=(()=>{class t{}return t.\u0275mod=Q.Ib({type:t}),t.\u0275inj=Q.Hb({factory:function(e){return new(e||t)},imports:[[i.e.forChild(E)],i.e]}),t})();var $=n("PCNd");let A=(()=>{class t{}return t.\u0275mod=Q.Ib({type:t}),t.\u0275inj=Q.Hb({factory:function(e){return new(e||t)},imports:[[$.a,J]]}),t})()}}]);